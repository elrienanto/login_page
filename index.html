<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Brand — Landing</title>
  <style>
    :root{--bg:#0b1220;--border:#1f2937;--text:#e2e8f0;--muted:#94a3b8;--accent:#60a5fa;}
    *{box-sizing:border-box} body{margin:0;background:#0b1220;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:20px}
    header{position:sticky;top:0;background:rgba(10,15,26,.7);backdrop-filter:saturate(120%) blur(6px);border-bottom:1px solid var(--border)}
    nav{display:flex;align-items:center;justify-content:space-between;gap:20px}
    .brand{font-weight:700} .menu{display:flex;gap:16px;flex-wrap:wrap}
    .menu a{padding:10px 12px;border-radius:10px;color:var(--muted)} .menu a:hover{background:#11192d;color:#e5ecf7}
    .hero{padding:56px 0 20px} .hero h1{margin:0 0 10px;font-size:36px} .hero p{margin:0;color:var(--muted)}
    .status{margin-top:16px;display:inline-flex;gap:10px;align-items:center;padding:10px 12px;border:1px dashed #20304f;border-radius:10px}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;margin:28px 0}
    .card{background:linear-gradient(180deg,#0f172a,#0c1427);border:1px solid var(--border);border-radius:16px;padding:18px}
    .card h3{margin:0 0 6px;font-size:16px} .card p{margin:0;color:var(--muted);font-size:14px}
    .btn{border:none;border-radius:12px;padding:12px 16px;cursor:pointer;font-weight:600}
    .btn-primary{background:var(--accent);color:#08101f}
    footer{border-top:1px solid var(--border);margin-top:30px;padding:20px 0;color:var(--muted);font-size:14px}
    @media (max-width:900px){ .grid{grid-template-columns:1fr} .hero{padding-top:36px} }
  </style>

  <!-- WebEngage SDK (modern CDN) -->
  <script>
    var webengage;
    !function(w,e,b,n,g){function o(e,t){e[t[t.length-1]]=function(){r.__queue.push([t.join("."),arguments])}}
    var i,s,r=w[e],z=" ",l="init options user login logout setAttribute setAttributeOnce setAttributes setAttributesOnce track screen onReady".split(z);
    if(r) return; i=function(){this.__queue=[];},s={}; r=w[e]=new i;
    for(var a=0;a<l.length;a++) o(s,l[a].split(z));
    r.__api=s; r.__queue=[]; r.__version="6.0"; r.__loaded=!1;
    var d=document.createElement("script"); d.type="text/javascript"; d.async=!0;
    d.src="https://cdn.webengage.com/v3/webengage-min.js";
    var n0=document.getElementsByTagName("script")[0]; n0.parentNode.insertBefore(d,n0);
    r.__init_time=(new Date).getTime();
  }(window,"webengage");

  webengage.init("76abaa9"); /* <-- keep your real Site ID */
  </script>
</head>

<body>
  <header>
    <div class="wrap">
      <nav>
        <div class="brand">YourBrand</div>
        <div class="menu">
          <a id="nav-home" data-slot="nav_home" href="/">Home</a>
          <a id="nav-product" data-slot="nav_product" href="/product">Product</a>
          <a id="nav-about" data-slot="nav_about" href="/about">About Us</a>
          <a id="nav-career" data-slot="nav_career" href="/career">Career</a>
          <a id="nav-services" data-slot="nav_services" href="/services">Services</a>
        </div>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <h1>Make your journey personal.</h1>
      <p id="heroCopy" data-slot="hero_copy">
        We’ll identify you **only** if your link includes a user ID.
      </p>
      <div class="status" id="statusBox" aria-live="polite">
        <strong id="statusBadge">Checking…</strong>
        <span id="statusText">Looking for <code>?uid=</code> or <code>?user_id=</code> in the URL.</span>
      </div>
      <div style="margin-top:14px;">
        <button id="goSub" class="btn btn-primary" type="button">Go to Subscription</button>
      </div>
    </section>

    <section class="grid" aria-label="Highlights">
      <article class="card" data-slot="card_one">
        <h3>Fast setup</h3><p>Drop-in SDK + tokenized links.</p>
      </article>
      <article class="card" data-slot="card_two">
        <h3>Smart personalization</h3><p>Target banners and nav via segments.</p>
      </article>
      <article class="card" data-slot="card_three">
        <h3>Clean attribution</h3><p>Carry UTM + uid across pages.</p>
      </article>
    </section>
  </main>

  <footer><div class="wrap">© <span id="y"></span> YourBrand.</div></footer>

  <script>
    // --- query params & helpers ---
    const params = new URLSearchParams(location.search);
    const uid = params.get("uid") || params.get("user_id") || null;
    const setStatus = (b,t)=>{ document.getElementById('statusBadge').textContent=b; document.getElementById('statusText').textContent=t; };

    // Identify only if uid exists
    webengage.onReady(function(){
      if (!uid) {
        setStatus("Anonymous","No user ID in URL. Skipping WebEngage login.");
        return;
      }
      try {
        webengage.user.login(uid);

        // (Optional) attach UTM params as user attributes
        ["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(k=>{
          const v=params.get(k); if(v) try{ webengage.user.setAttribute(k,v); }catch(e){}
        });

        try { webengage.track("Email Clickthrough", { uid, path: location.pathname }); } catch(e){}
        setStatus("Identified", `Logged in as "${uid}".`);
      } catch (e) {
        setStatus("Anonymous","Tried to log in but SDK errored.");
        console.warn("WebEngage login error:", e);
      }
    });

    // Carry params to subscription page
    document.getElementById("goSub").addEventListener("click", ()=>{
      const dest = new URL("https://elrienanto.github.io/subscription_page");
      dest.search = params.toString();
      try { webengage.track("Subscription CTA Clicked", { uid: uid || null }); } catch(e){}
      location.href = dest.toString();
    });

    document.getElementById("y").textContent = new Date().getFullYear();
  </script>
</body>
</html>
